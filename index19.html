<!--Grouping data - it has to be inside Store"-->
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cat.net/ajax/libs/extjs/6.0.0/classic/theme-triton/resources/theme-triton-all-debug_1.css">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/extjs/6.2.0/ext-all-debug.js"></script>

</head>
<body>

<script type="text/javascript">

    Ext.application({
        name: 'MyApp',
        launch: function () {


            Ext.create('Ext.data.Store', {
                storeId: 'CustomersStore',
                fields:[ 'id', 'email', 'approved'],
                autoLoad: true,
                autoSync: true,

                // Creating a proxy
                proxy:{
                    type: 'rest',
                    url: 'example2.json',
                    reader:{
                        type: 'json',
                        rootProperty: 'customers'
                    }
                },
                // Sorting data (Example: email) to be displayed on Grid
                sorters:[
                    {
                        property: 'email'
                    }
                ],

                groupField:''



            });

            // Creating a Class -> Then creating an alias -> then using the alias in
            // { xtype: myalias}
            Ext.define('CustomersGridPanel', {
                extend: 'Ext.grid.Panel',
                alias: 'widget.customersgridpanel', // alias to be used later

                title: 'Customers',
                store: Ext.data.StoreManager.lookup('CustomersStore'),
//                listeners: {
//                    itemclick: function (view, record) {
//                        var f = Ext.create('Ext.form.Panel', {
//                            xtype: 'formpanel',
//                            title: 'Update Record',
//                            width: 300,
//                            height: 200,
//                            floating: true,
//                            centered: true,
//                            modal: true,
//                            buttons: [{
//                                text: 'Update',
//                                iconCls: 'x-fa fa-check',
//                                handler: function () {
//                                    f.updateRecord(record);
//                                    f.close();
//                                }
//                            }, {
//                                text: 'Cancel',
//                                iconCls: 'x-fa fa-close',
//                                handler: function () {
//                                    f.close();
//                                }
//                            }],
//                            items: [ {
//                                xtype: 'textfield',
//                                name: 'email',
//                                fieldLabel: 'Email'
//
//                            }]
//                        })
//                        f.show();
//                        f.loadRecord(record);
//                    }
//                },
                columns: [
                    { text: 'ID', dataIndex: 'id' },
                    { text: 'EMAIL', dataIndex: 'email', flex: 1 , minWidth:100, width:75 },
                    { text: 'APPROVED', dataIndex: 'approved' }
                ]
            });



            Ext.create('Ext.container.Viewport',{
                layout: 'fit',
                items: [
                    {
                        xtype: 'panel',
                        resizable: false,
                        layout: 'border',
                        collapsed: false,
                        items:[
                            {
                                xtype: 'container',
                                region: 'center',
                                layout:{
                                    type:'vbox',
                                    align: 'stretch'

                                },

                                items: [
                                    {
                                        xtype: 'button',
                                        text:'click me',
                                        style:{
                                            width: "20",
                                            background: "red"
                                        },

                                        handler: function (btn) {
//                                            btn.up('viewport').down("#TEST").add({
//                                                xtype: 'customersgridpanel',
//                                                closable: true
                                                Ext.Msg.alert("Title", "Test");
//                                            });
                                        }

                                    },
                                    {
                                        xtype: 'customersgridpanel'
                                    },
                                    {
                                        xtype: 'splitter'
                                    },
                                    {
                                        html: '<b>Presenters</b>',
                                        flex: 2
                                    }
                                ]
                            },
                            {
                                itemId: 'TEST',
                                html:  '<b>Details</b>',
                                flex: 2,
                                region: 'east',
                                split: true
                            }
                        ]
                    }
                ]
            });
        }
    });




</script>

</body>
</html>





